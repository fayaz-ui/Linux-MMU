<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMU Memory Translation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid #3498db;
        }
        
        .section h2 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .memory-diagram {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .memory-space {
            flex: 1;
            min-width: 200px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .memory-space h3 {
            text-align: center;
            margin: 0 0 20px 0;
            color: #2c3e50;
            font-size: 1.1em;
        }
        
        .address-block {
            margin: 8px 0;
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .address-block:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .virtual-addr {
            background: linear-gradient(135deg, #e8f4fd, #c3e9ff);
            border: 2px solid #3498db;
            color: #2980b9;
        }
        
        .physical-addr {
            background: linear-gradient(135deg, #fff2e8, #ffe6cc);
            border: 2px solid #e67e22;
            color: #d35400;
        }
        
        .process1 { border-left: 6px solid #e74c3c; }
        .process2 { border-left: 6px solid #27ae60; }
        .thread1 { border-left: 6px solid #9b59b6; }
        .thread2 { border-left: 6px solid #f39c12; }
        
        .arrow {
            font-size: 1.5em;
            color: #7f8c8d;
            align-self: center;
            margin: 0 10px;
        }
        
        .page-table {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #6c757d;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .page-table h4 {
            margin: 0 0 15px 0;
            color: #495057;
            text-align: center;
        }
        
        .page-entry {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            margin: 4px 0;
            background: white;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            border-left: 4px solid #6c757d;
        }
        
        .isolation-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .process-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3498db;
        }
        
        .thread-container {
            margin: 15px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #9b59b6;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .explanation {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .explanation h4 {
            margin-top: 0;
            color: #fff;
        }
        
        .key-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .key-point {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .key-point h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        @media (max-width: 768px) {
            .memory-diagram {
                flex-direction: column;
            }
            
            .isolation-demo {
                grid-template-columns: 1fr;
            }
            
            .legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>MMU: Virtual to Physical Address Translation</h1>
        
        <div class="section">
            <h2>How Virtual Addresses Map to Physical Memory</h2>
            
            <div class="memory-diagram">
                <div class="memory-space">
                    <h3>Virtual Address Space</h3>
                    <div class="address-block virtual-addr process1">
                        <span>0x1000</span>
                        <span>Process A</span>
                    </div>
                    <div class="address-block virtual-addr process1">
                        <span>0x2000</span>
                        <span>Process A</span>
                    </div>
                    <div class="address-block virtual-addr process2">
                        <span>0x1000</span>
                        <span>Process B</span>
                    </div>
                    <div class="address-block virtual-addr process2">
                        <span>0x3000</span>
                        <span>Process B</span>
                    </div>
                </div>
                
                <div class="arrow">→</div>
                
                <div class="memory-space">
                    <h3>MMU Translation</h3>
                    <div class="page-table">
                        <h4>Process A Page Table</h4>
                        <div class="page-entry">
                            <span>0x1000 → 0x8000</span>
                        </div>
                        <div class="page-entry">
                            <span>0x2000 → 0xC000</span>
                        </div>
                    </div>
                    <div class="page-table">
                        <h4>Process B Page Table</h4>
                        <div class="page-entry">
                            <span>0x1000 → 0xA000</span>
                        </div>
                        <div class="page-entry">
                            <span>0x3000 → 0xE000</span>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">→</div>
                
                <div class="memory-space">
                    <h3>Physical RAM</h3>
                    <div class="address-block physical-addr process1">
                        <span>0x8000</span>
                        <span>Process A Data</span>
                    </div>
                    <div class="address-block physical-addr process2">
                        <span>0xA000</span>
                        <span>Process B Data</span>
                    </div>
                    <div class="address-block physical-addr process1">
                        <span>0xC000</span>
                        <span>Process A Data</span>
                    </div>
                    <div class="address-block physical-addr process2">
                        <span>0xE000</span>
                        <span>Process B Data</span>
                    </div>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>Process A</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #27ae60;"></div>
                    <span>Process B</span>
                </div>
            </div>
            
            <div class="explanation">
                <h4>Key Insight: Memory Isolation</h4>
                <p>Notice how both processes use the same virtual address (0x1000), but the MMU maps them to different physical addresses (0x8000 vs 0xA000). This is how processes are isolated from each other - they can't access each other's memory because their page tables don't contain mappings to each other's physical pages.</p>
            </div>
        </div>
        
        <div class="section">
            <h2>Processes vs Threads: Memory Layout</h2>
            
            <div class="isolation-demo">
                <div class="process-container">
                    <h3>Two Separate Processes</h3>
                    <p><strong>Each has its own page table</strong></p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <h4 style="margin-top: 0; color: #e74c3c;">Process A</h4>
                        <div style="font-family: monospace; font-size: 0.9em;">
                            Virtual: 0x1000 → Physical: 0x8000<br>
                            Virtual: 0x2000 → Physical: 0xC000<br>
                            <em>Cannot access Process B's memory</em>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <h4 style="margin-top: 0; color: #27ae60;">Process B</h4>
                        <div style="font-family: monospace; font-size: 0.9em;">
                            Virtual: 0x1000 → Physical: 0xA000<br>
                            Virtual: 0x3000 → Physical: 0xE000<br>
                            <em>Cannot access Process A's memory</em>
                        </div>
                    </div>
                    
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <strong>Isolation:</strong> Complete memory separation via different page tables
                    </div>
                </div>
                
                <div class="process-container">
                    <h3>Threads in Same Process</h3>
                    <p><strong>Share the same page table</strong></p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <h4 style="margin-top: 0; color: #2c3e50;">Process C (Multi-threaded)</h4>
                        <div style="font-family: monospace; font-size: 0.9em;">
                            <strong>Shared Page Table:</strong><br>
                            Virtual: 0x1000 → Physical: 0x10000 (Heap)<br>
                            Virtual: 0x2000 → Physical: 0x12000 (Code)<br>
                            Virtual: 0x3000 → Physical: 0x14000 (Global data)
                        </div>
                    </div>
                    
                    <div class="thread-container">
                        <h4 style="margin-top: 0; color: #9b59b6;">Thread 1</h4>
                        <div style="font-family: monospace; font-size: 0.9em;">
                            Stack: Virtual 0xF000 → Physical 0x16000<br>
                            <em>Private stack, shared heap/code</em>
                        </div>
                    </div>
                    
                    <div class="thread-container">
                        <h4 style="margin-top: 0; color: #f39c12;">Thread 2</h4>
                        <div style="font-family: monospace; font-size: 0.9em;">
                            Stack: Virtual 0xE000 → Physical 0x18000<br>
                            <em>Private stack, shared heap/code</em>
                        </div>
                    </div>
                    
                    <div style="background: #fff2e8; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <strong>Sharing:</strong> Same page table means threads can access shared memory, but have separate stacks
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>Key Concepts Explained</h2>
            
            <div class="key-points">
                <div class="key-point">
                    <h4>Virtual Memory</h4>
                    <p>Each process sees a consistent, private address space starting from 0x0000. The actual physical locations can be anywhere in RAM and can change over time.</p>
                </div>
                
                <div class="key-point">
                    <h4>Page Tables</h4>
                    <p>Each process has its own page table that maps virtual addresses to physical addresses. The MMU hardware uses these tables to translate addresses automatically.</p>
                </div>
                
                <div class="key-point">
                    <h4>Memory Isolation</h4>
                    <p>Processes can't access each other's memory because their page tables only contain mappings to their own physical pages. Attempting to access unmapped addresses causes page faults.</p>
                </div>
                
                <div class="key-point">
                    <h4>Thread Memory Sharing</h4>
                    <p>Threads within the same process share the same page table, so they can access the same heap and global variables, but each has its own stack space.</p>
                </div>
                
                <div class="key-point">
                    <h4>MMU Translation</h4>
                    <p>The Memory Management Unit translates every memory access from virtual to physical addresses using the current process's page table. This happens transparently to your program.</p>
                </div>
                
                <div class="key-point">
                    <h4>Address Space Layout</h4>
                    <p>A typical process has code at low addresses, heap growing upward, and stack growing downward from high addresses. Threads share everything except their individual stacks.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation">
            <h4>Why This Matters</h4>
            <p>This memory architecture enables:</p>
            <ul>
                <li><strong>Security:</strong> Processes cannot accidentally or maliciously access each other's memory</li>
                <li><strong>Stability:</strong> A crash in one process doesn't corrupt another process's memory</li>
                <li><strong>Efficiency:</strong> Physical memory can be allocated non-contiguously while appearing contiguous to programs</li>
                <li><strong>Flexibility:</strong> The OS can move pages around in physical memory, swap to disk, and implement copy-on-write optimizations</li>
            </ul>
        </div>
    </div>
</body>
</html>